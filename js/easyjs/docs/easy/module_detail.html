<!DOCTYPE HTML>
<html lang="en-US">
<head>
<meta charset="UTF-8">
<title>模块加载器 - easy.js docs</title>
<link rel="stylesheet" href="../assets/style.css" />
</head>
<body>
<div class="slidebar">
    <div class="top_box">
        <h1 class="logo">easy</h1>
        <h2 class="sub_logo">.js</h2>
    </div>

    <h3 class="page_title">Docs<span class="ver">Version : 0.8.0</span></h3>
    
        <ul class="menu_left">
        <li><a href="../index.html">速查表</a></li>
        <li class="current"><a href="index.html">种子</a></li>
        <li><a href="../lang/index.html">语言扩展</a></li>
        <li><a href="../support/index.html">特征嗅探</a></li>
        <li><a href="../data/index.html">数据存储</a></li>
        <li><a href="../selector/index.html">选择器</a></li>
        <li><a href="../node/index.html">节点</a></li>
        <li><a href="../attr/index.html">属性</a></li>
        <li><a href="../css/index.html">样式</a></li>        
        <li><a href="../event/index.html">事件</a></li>
        <li><a href="../promise/index.html">异步回调</a></li>
        <li><a href="../anim/index.html">动画</a></li>
        <li><a href="../ajax/index.html">数据交互</a></li>
    </ul>
</div>

<div class="content">
    <div class="caption"><h2>模块加载器</h2><span class="file">Define in : easy.js</span></div>
    <div class="mod_desc">
        <p>easy.js集成了一个微型的模块加载器，可以简单方便的对js模块进行加载，该加载器尽量遵循 <a href="http://wiki.commonjs.org/wiki/Modules/AsynchronousDefinition" target="_blank">AMD规范</a>。使用 <a href="define.html">define</a> 定义一个模块，使用 <a href="use.html">use</a> 来加载一个模块。</p>
    </div>

    <div class="article_box">
        <h3>模块名</h3>
        <p>每个模块都要有一个模块名，<b>模块名要和该模块的文件名保持一致</b>，有了模块名就可以很方便的对模块进行管理，所以暂不考虑支持匿名模块。</p>
        <h3>基础路径 baseUrl</h3>
        <p>基础路径分为<b>全局基础路径</b>和<b>局部基础路径</b>两种，全局基础路径是 easy.js 加载时所在的路径，使用 use 加载模块时，将基于全局基础路径来解析相对标识，全局基础路径可以使用 <a href="config.html">config</a> 方法来进行配置。基础路径的配置可以是绝对基础路径，也可以是相对基础路径，相对的基础路径将以 HTML 页面所在的路径为基础路径进一步解析。无论是绝对基础路径还是相对基础路径，都要以 “/” 作为结尾，如果想设置 HTML页面所在的路径为基础路径可以配置 “./”。 </p>
        <p>局部基础路径是用于加载依赖模块，就是被依赖模块的路径。假如 a 模块依赖 b模块，那么在解析 b 模块的相对标识时，将以 a 模块的路径来解析，不会受全局基础路径的影响，这样会更方便，局部基础路径是不可配置的。</p>
        <h3>模块标识</h3>
        <p>模块标识分为<b>相对标识</b>和<b>绝对标识</b>两种。</p>
        <p>相对标识是根据基础路径来进行解析的。假如基础路径为 http://easyjs.org/js/：</p>
        <p>模块标识 hello 解析的模块路径就是 http://easyjs.org/js/hello.js，对应的模块名既是 hello。</p>
        <p>模块标识 ajax/xhr 解析的模块路径是 http://easyjs.org/js/ajax/xhr.js，对应的模块名就是 xhr。</p>
        <p>如果模块标识是以 ../ 开头，如 ../core，那么解析的模块路径是 http://easyjs.org/core.js，对应的模块名就是 core。</p>
        <p>绝对标识就是普通的 url，可以是 http 协议，也可以是 file 协议，绝对标识不会受到基础路径的影响，如 http://example.com/test.js 的路径就是其自身，模块名就是 test。</p>
        <p>目前支持 JS 和 CSS 两种类型的模块，JS 模块为了简便，模块标识可以省略 ".js" 的后缀，CSS 模块为了区分，模块标识一定要带上 ".css" 的后缀，模块标识也允许添加参数，如 hello.js?v20121202，这对于刷新缓存很重要。</p>
        <h3>模块对外接口 exports</h3>
        <p>每个模块都定义在一个函数体内，如果该模块想让外部访问，除了使用全局变量外( 不建议使用 )，可以对外部暴露一个接口。只要在定义模块的时候，使用 return 返回一个值，就是返回了一个外部接口 exports。该接口在正式返回前可以使用 <a href="modify.html">modify</a> 方法进行修改。</p>
        <p>在使用 use 进行模块加载时，use 的回调函数的参数就可以接收到模块的 exports，同理，在加载依赖模块时，define 的 factoy 也同样可以接收到依赖模块的 exports。</p>
        <h3>调试接口</h3>
        <p>不管模块加载成功与否，都有一个对象来保存该模块的信息。easy.js 提供了外部可以访问到的 <a href="module.html">module</a> 对象来保存所有的模块信息。</p>
    </div>
    

</div>    
</body>
</html>