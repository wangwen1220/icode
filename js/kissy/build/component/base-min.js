/*
Copyright 2012, KISSY UI Library v1.40dev
MIT Licensed
build time: Nov 14 23:13
*/
KISSY.add("component/base",function(d,e,f,c,b,a,h,l){d.mix(e,{Controller:f,Render:c,Container:b,DelegateChildren:a,DecorateChild:l,DecorateChildren:h});return e},{requires:"./base/impl,./base/controller,./base/render,./base/container,./base/delegate-children,./base/decorate-children,./base/decorate-child".split(",")});
KISSY.add("component/base/box-render",function(d){function e(){}var f=d.all,c=d.Env.host.document;e.ATTRS={el:{setter:function(b){return f(b)}},elCls:{},elStyle:{},width:{},height:{},elTagName:{value:"div"},elAttrs:{},content:{},elBefore:{},render:{},visible:{value:!0},visibleMode:{value:"display"},contentEl:{valueFn:function(){return this.get("el")}}};e.HTML_PARSER={el:function(b){return b},content:function(b){return(this.get("contentEl")||b).html()}};e.prototype={__createDom:function(){var b,a;
this.get("srcNode")||(a=this.get("contentEl"),b=f("<"+this.get("elTagName")+">"),a&&b.append(a),this.setInternal("el",b),a||this.setInternal("contentEl",b))},__renderUI:function(){if(!this.get("srcNode")){var b=this.get("render"),a=this.get("el"),h=this.get("elBefore");h?a.insertBefore(h,void 0):b?a.appendTo(b,void 0):a.appendTo(c.body,void 0)}},_uiSetElAttrs:function(b){this.get("el").attr(b)},_uiSetElCls:function(b){this.get("el").addClass(b)},_uiSetElStyle:function(b){this.get("el").css(b)},_uiSetWidth:function(b){this.get("el").width(b)},
_uiSetHeight:function(b){this.get("el").height(b)},_uiSetContent:function(b){var a;if(!this.get("srcNode")||this.get("rendered"))a=this.get("contentEl"),"string"==typeof b?a.html(b):b&&a.empty().append(b)},_uiSetVisible:function(b){var a=this.get("el"),c=this.getCssClassWithState("-shown"),d=this.getCssClassWithState("-hidden"),f=this.get("visibleMode");b?(a.removeClass(d),a.addClass(c)):(a.removeClass(c),a.addClass(d));"visibility"==f?a.css("visibility",b?"visible":"hidden"):a.css("display",b?"":
"none")},__destructor:function(){var b=this.get("el");b&&b.remove()}};return e},{requires:["node"]});
KISSY.add("component/base/box",function(){function d(){}d.ATTRS={content:{view:1},width:{view:1},height:{view:1},elCls:{view:1},elStyle:{view:1},elAttrs:{view:1},elBefore:{view:1},el:{view:1},render:{view:1},visibleMode:{view:1},visible:{value:!0,view:1},srcNode:{view:1}};d.prototype={_uiSetVisible:function(d){this.get("rendered")&&this.fire(d?"show":"hide")},show:function(){this.render();this.set("visible",!0);return this},hide:function(){this.set("visible",!1);return this}};return d});
KISSY.add("component/base/container",function(d,e,f,c){return e.extend([f,c])},{requires:["./controller","./delegate-children","./decorate-children"]});
KISSY.add("component/base/controller",function(d,e,f,c,b,a,h,l){function s(g){return function(a){this==a.target&&(a=a.newVal,this.get("view").set(g,a))}}function q(g){return function(a){var b=this.get("view");return a===l?b.get(g):a}}function r(g){var t,b,c,h={},p,f=g.get("xrender");t=g.getAttrs();for(c in t)if(b=t[c],b.view){if((p=g.get(c))!==l)h[c]=p;g.on("after"+d.ucfirst(c)+"Change",s(c));b.getter=q(c)}g=g.constructor;for(b=[];g&&g!=k;)(t=a.getXClassByConstructor(g))&&b.push(t),g=g.superclass&&
g.superclass.constructor;g=b.join(" ");h.ksComponentCss=g;return new f(h)}function p(g,a){var b=g.relatedTarget;return b&&(b===a[0]||a.contains(b))}function n(g,a){return g["__ks_wrap_"+a]=function(b){if(!g.get("disabled"))g[a](b)}}function o(g,a){return g["__ks_wrap_"+a]}var u=d.Env.host.document.documentMode||d.UA.ie,m=d.Features,i=f.Gesture,j=m.isTouchSupported||m.isMsPointerEnabled,k=b.extend([e],{isController:!0,getCssClassWithPrefix:a.getCssClassWithPrefix,initializer:function(){this.setInternal("view",
r(this))},createDom:function(){var g;g=this.get("view");g.create(l);g=g.getKeyEventTarget();this.get("allowTextSelection")||g.unselectable(l)},renderUI:function(){var g,a,b;this.get("view").render();a=this.get("children").concat();for(g=this.get("children").length=0;g<a.length;g++)b=this.addChild(a[g]),b.render()},_uiSetFocusable:function(a){var b,c=this.getKeyEventTarget();if(a)c.attr("tabIndex",0).attr("hideFocus",!0).on("focus",n(this,"handleFocus")).on("blur",n(this,"handleBlur")).on("keydown",
n(this,"handleKeydown"));else c.removeAttr("tabIndex"),(b=o(this,"handleFocus"))&&c.detach("focus",b),(b=o(this,"handleBlur"))&&c.detach("blur",b),(b=o(this,"handleKeydown"))&&c.detach("keydown",b)},_uiSetHandleMouseEvents:function(a){var b=this.get("el"),c;if(a){if(!j)b.on("mouseenter",n(this,"handleMouseEnter")).on("mouseleave",n(this,"handleMouseLeave")).on("contextmenu",n(this,"handleContextMenu"));b.on(i.start,n(this,"handleMouseDown")).on(i.end,n(this,"handleMouseUp")).on(i.tap,n(this,"performActionInternal"));
if(u&&9>u)b.on("dblclick",n(this,"handleDblClick"))}else j||((c=o(this,"handleMouseEnter"))&&b.detach("mouseenter",c),(c=o(this,"handleMouseLeave"))&&b.detach("mouseleave",c),(c=o(this,"handleContextMenu"))&&b.detach("contextmenu",c)),(c=o(this,"handleMouseDown"))&&b.detach(i.start,c),(c=o(this,"handleMouseUp"))&&b.detach(i.end,c),(c=o(this,"performActionInternal"))&&b.detach(i.tap,c),u&&9>u&&(c=o(this,"handleDblClick"))&&b.detach("dblclick",c)},_uiSetFocused:function(a){a&&this.getKeyEventTarget()[0].focus()},
getContentElement:function(){return this.get("view").getContentElement()},getKeyEventTarget:function(){return this.get("view").getKeyEventTarget()},addChild:function(a,b){var h=this.get("children"),p;b===l&&(b=h.length);p=h[b]&&h[b].get("el")||null;var d=a;this.create();var f=this.getContentElement(),d=c.create(d,this);d.setInternal("parent",this);d.set("render",f);d.set("elBefore",p);d.create(l);a=d;h.splice(b,0,a);this.get("rendered")&&a.render();return a},removeChild:function(a,b){var c=this.get("children"),
h=d.indexOf(a,c);-1!=h&&c.splice(h,1);b&&a.destroy&&a.destroy();return a},removeChildren:function(a){var b,c=[].concat(this.get("children"));for(b=0;b<c.length;b++)this.removeChild(c[b],a);return this},getChildAt:function(a){return this.get("children")[a]||null},handleDblClick:function(a){this.performActionInternal(a)},handleMouseOver:function(a){var b=this.get("el");p(a,b)||this.handleMouseEnter(a)},handleMouseOut:function(a){var b=this.get("el");p(a,b)||this.handleMouseLeave(a)},handleMouseEnter:function(a){this.set("highlighted",
!!a)},handleMouseLeave:function(a){this.set("active",!1);this.set("highlighted",!a)},handleMouseDown:function(a){var b;if(1==a.which||j)if(b=this.getKeyEventTarget(),this.get("activeable")&&this.set("active",!0),this.get("focusable")&&(b[0].focus(),this.set("focused",!0)),!this.get("allowTextSelection"))b=(b=a.target.nodeName)&&b.toLowerCase(),"input"!=b&&"textarea"!=b&&a.preventDefault()},handleMouseUp:function(a){this.get("active")&&(1==a.which||j)&&this.set("active",!1)},handleContextMenu:function(){},
handleFocus:function(a){this.set("focused",!!a);this.fire("focus")},handleBlur:function(a){this.set("focused",!a);this.fire("blur")},handleKeyEventInternal:function(a){if(a.keyCode==f.KeyCodes.ENTER)return this.performActionInternal(a)},handleKeydown:function(a){if(this.handleKeyEventInternal(a))return a.halt(),!0},performActionInternal:function(){},destructor:function(){var a,b=this.get("children");for(a=0;a<b.length;a++)b[a].destroy&&b[a].destroy();this.get("view").destroy()}},{ATTRS:{handleMouseEvents:{value:!0},
focusable:{value:!0,view:1},allowTextSelection:{value:!1},activeable:{value:!0},focused:{view:1},active:{view:1},highlighted:{view:1},children:{value:[]},prefixCls:{value:"ks-",view:1},parent:{setter:function(a){this.addTarget(a)}},disabled:{view:1},xrender:{value:h}}},{xclass:"controller"});return k},{requires:"./box,event,./impl,./uibase,./manager,./render".split(",")});
KISSY.add("component/base/decorate-child",function(d,e){function f(){}d.augment(f,e,{decorateInternal:function(c){this.set("el",c);var b=this.get("decorateChildCls");if(c=c.one("."+b))(b=this.findUIConstructorByNode(c,1))?this.decorateChildrenInternal(b,c):this.decorateChildren(c)}});return f},{requires:["./decorate-children"]});
KISSY.add("component/base/decorate-children",function(d,e){function f(){}d.augment(f,{decorateInternal:function(c){this.set("el",c);this.decorateChildren(c)},findUIConstructorByNode:function(c){var c=c.attr("class")||"",b=this.get("prefixCls"),c=c.replace(RegExp("\\b"+b,"ig"),"");return e.getConstructorByXClass(c)},decorateChildrenInternal:function(c,b){this.addChild(new c({srcNode:b,prefixCls:this.get("prefixCls")}))},decorateChildren:function(c){var b=this;c.children().each(function(a){var c=b.findUIConstructorByNode(a);
b.decorateChildrenInternal(c,a)})}});return f},{requires:["./manager"]});
KISSY.add("component/base/delegate-children",function(d,e,f){function c(){}function b(a){if(!this.get("disabled")){var b=this.getOwnerControl(a.target,a);if(b&&!b.get("disabled"))switch(a.type){case h.start:b.handleMouseDown(a);break;case h.end:b.handleMouseUp(a);break;case h.tap:b.performActionInternal(a);break;case "mouseover":b.handleMouseOver(a);break;case "mouseout":b.handleMouseOut(a);break;case "contextmenu":b.handleContextMenu(a);break;case "dblclick":b.handleDblClick(a)}}}var a=d.Env.host.document.documentMode||
e.ie,e=d.Features,h=f.Gesture,l=e.isTouchSupported||e.isMsPointerEnabled;c.ATTRS={delegateChildren:{value:!0}};d.augment(c,{__bindUI:function(){var c;this.get("delegateChildren")&&(c=h.start+" "+h.end+" "+h.tap+" ",l||(c+="mouseover mouseout contextmenu "+(a&&9>a?"dblclick ":"")),this.get("el").on(c,b,this))},getOwnerControl:function(a){for(var b=this.get("children"),c=b.length,h=this.get("el")[0];a&&a!==h;){for(var d=0;d<c;d++)if(b[d].get("el")[0]===a)return b[d];a=a.parentNode}return null}});return c},
{requires:["ua","event"]});KISSY.add("component/base/impl",function(d,e,f){return{Manager:f,UIBase:e,create:function(c,b){var a;if(c&&(a=c.xclass))b&&!c.prefixCls&&(c.prefixCls=b.get("prefixCls")),a=f.getConstructorByXClass(a),c=new a(c);return c}}},{requires:["./uibase","./manager"]});
KISSY.add("component/base/manager",function(d){function e(a){for(var a=d.trim(a).split(/\s+/),b=0;b<a.length;b++)a[b]&&(a[b]=this.get("prefixCls")+a[b]);return a.join(" ")}var f={},c={},b={__instances:c,addComponent:function(a,b){c[a]=b},removeComponent:function(a){delete c[a]},getComponent:function(a){return c[a]},getCssClassWithPrefix:e,getXClassByConstructor:function(a){for(var b in f)if(f[b].constructor==a)return b;return 0},getConstructorByXClass:function(a){for(var a=a.split(/\s+/),b=-1,c,d=
null,e=0;e<a.length;e++){var r=f[a[e]];if(r&&(c=r.priority)>b)b=c,d=r.constructor}return d},setConstructorByXClass:function(a,b){d.isFunction(b)?f[a]={constructor:b,priority:0}:(b.priority=b.priority||0,f[a]=b)}};b.getCssClassWithPrefix=e;return b});
KISSY.add("component/base/render",function(d,e,f,c,b){return c.extend([e],{getCssClassWithState:function(a){var b=this.get("ksComponentCss")||"",a=a||"";return this.getCssClassWithPrefix(b.split(/\s+/).join(a+" ")+a)},getCssClassWithPrefix:b.getCssClassWithPrefix,createDom:function(){this.get("el").addClass(this.getCssClassWithState())},getKeyEventTarget:function(){return this.get("el")},_uiSetHighlighted:function(a){var b=this.getCssClassWithState("-hover");this.get("el")[a?"addClass":"removeClass"](b)},
_uiSetDisabled:function(a){var b=this.getCssClassWithState("-disabled");this.get("el")[a?"addClass":"removeClass"](b).attr("aria-disabled",a);this.get("focusable")&&this.getKeyEventTarget().attr("tabIndex",a?-1:0)},_uiSetActive:function(a){var b=this.getCssClassWithState("-active");this.get("el")[a?"addClass":"removeClass"](b).attr("aria-pressed",!!a)},_uiSetFocused:function(a){var b=this.get("el"),c=this.getCssClassWithState("-focused");b[a?"addClass":"removeClass"](c)},getContentElement:function(){return this.get("contentEl")||
this.get("el")}},{ATTRS:{prefixCls:{value:"ks-"},focusable:{value:!0},focused:{},active:{},disabled:{},highlighted:{}},HTML_PARSER:{disabled:function(){var a=this.getCssClassWithState("-disabled");return this.get("el").hasClass(a)}}})},{requires:["./box-render","./impl","./uibase","./manager"]});
KISSY.add("component/base/uibase",function(d,e,f,c,b){function a(a){for(var b=[],a=a.constructor;a;)b.push(a),a=a.superclass&&a.superclass.constructor;return b}function h(a){var b=a.getAttrs(),c,d;for(c in b)d=l+s(c),a[d]&&function(b,c){a.on("after"+s(b)+"Change",function(b){if(b.target===a)a[c](b.newVal,b)})}(c,d)}var l="_uiSet",s=d.ucfirst,f=d.noop,q=e.extend({constructor:function(){var a;q.superclass.constructor.apply(this,arguments);this.decorateInternal&&(a=this.get("srcNode"))&&this.decorateInternal(a);
this.get("autoRender")&&this.render()},initializer:function(){var b,f=d.one(this.get("srcNode"));(b=this.get("id"))&&c.addComponent(b,this);if(f){var e=this.constructor,h,m;m=a(this);for(b=m.length-1;0<=b;b--)if(e=m[b],h=e.HTML_PARSER){var e=f,i=void 0,j=void 0,k=this.userConfig||{};for(i in h)i in k||(j=h[i],d.isFunction(j)?this.setInternal(i,j.call(this,e)):"string"==typeof j?this.setInternal(i,e.one(j)):d.isArray(j)&&j[0]&&this.setInternal(i,e.all(j[0])))}this.setInternal("srcNode",f)}},create:function(){this.get("created")||
(this.fire("beforeCreateDom"),this.callMethodByHierarchy("createDom","__createDom"),this.setInternal("created",!0),this.fire("afterCreateDom"),this.callPluginsMethod("createDom"));return this},render:function(){if(!this.get("rendered")){this.create(b);this.fire("beforeRenderUI");this.callMethodByHierarchy("renderUI","__renderUI");this.fire("afterRenderUI");this.callPluginsMethod("renderUI");this.fire("beforeBindUI");h(this);this.callMethodByHierarchy("bindUI","__bindUI");this.fire("afterBindUI");
this.callPluginsMethod("bindUI");this.fire("beforeSyncUI");var c,d,f,e,m,i={},j=a(this),k;for(f=j.length-1;0<=f;f--)if(e=j[f],k=e.ATTRS)for(m in k)i[m]||(i[m]=1,e=l+s(m),(d=this[e])&&!1!==k[m].sync&&(c=this.get(m))!==b&&d.call(this,c));this.callMethodByHierarchy("syncUI","__syncUI");this.fire("afterSyncUI");this.callPluginsMethod("syncUI");this.setInternal("rendered",!0)}return this},createDom:f,renderUI:f,bindUI:f,syncUI:f,plug:function(){var a;a=this.get("plugins");q.superclass.plug.apply(this,
arguments);a=a[a.length-1];this.get("rendered")?(a.createDom(this),a.renderUI(this),a.bindUI(this),a.syncUI(this)):this.get("created")&&a.createDom(this)},destructor:function(){var a;(a=this.get("id"))&&c.removeComponent(a);return this}},{ATTRS:{rendered:{value:!1},created:{value:!1},xclass:{valueFn:function(){return c.getXClassByConstructor(this.constructor)}}}}),r=q.extend;d.mix(q,{HTML_PARSER:{},extend:function n(a,b,f){var e=d.makeArray(arguments),h={},k=e[e.length-1];k.xclass&&(e.pop(),e.push(k.xclass));
e=r.apply(this,e);d.isArray(a)&&(d.each(a.concat(e),function(a){a&&d.each(a.HTML_PARSER,function(a,b){h[b]=a})}),e.HTML_PARSER=h);k.xclass&&c.setConstructorByXClass(k.xclass,{constructor:e,priority:k.priority});e.extend=n;return e}});return q},{requires:["rich-base","node","./manager"]});
