/*
Copyright 2012, KISSY UI Library v1.40dev
MIT Licensed
build time: Nov 14 21:53
*/
KISSY.add("resizable",function(n,e,t,h,u){function o(b){var a=this,b=b.newVal,c=a.dds,k=a.get("prefixCls")+v,g=a.get("node");a.destroy();for(d=0;d<b.length;d++){var l=b[d],f=p("<div class='"+k+" "+k+"-"+l+"'></div>").prependTo(g,u),f=c[l]=new w({node:f,cursor:null});(function(b,c){c.on("drag",function(c){var k=c.target,f=a._width,l=a._height,e=a.get("minWidth"),m=a.get("maxWidth"),h=a.get("minHeight"),i=a.get("maxHeight"),n=c.top-k.get("startNodePos").top,c=c.left-k.get("startNodePos").left,f=j[b](e,
m,h,i,a._top,a._left,f,l,n,c);for(d=0;d<q.length;d++)f[d]&&g.css(q[d],f[d]);a.fire("resize",{handler:b,dd:k})});c.on("dragstart",function(){a._width=g.width();a._top=parseInt(g.css("top"));a._left=parseInt(g.css("left"));a._height=g.height();a.fire("resizeStart",{handler:b,dd:c})});c.on("dragend",function(){a.fire("resizeEnd",{handler:b,dd:c})})})(l,f)}}function r(b){var a=b.newVal;n.each(this.dds,function(b){b.set("disabled",a)})}function i(b){var a,c;i.superclass.constructor.apply(this,arguments);
this.on("afterHandlersChange",o,this);this.on("afterDisabledChange",r,this);c=this.get("node");this.dds={};"static"==c.css("position")&&c.css("position","relative");o.call(this,{newVal:this.get("handlers")});(a=this.get("disabled"))&&r.call(this,{newVal:a})}var p=e.all,d,w=h.Draggable,v="resizable-handler",h=["l","r"],s=["t","b"],q=["width","height","top","left"],j={t:function(b,a,c,d,g,l,f,e,m){b=Math.min(Math.max(c,e-m),d);return[0,b,g+e-b,0]},b:function(b,a,c,d,g,e,f,h,m){return[0,Math.min(Math.max(c,
h+m),d),0,0]},r:function(b,a,c,d,g,e,f,h,m,i){return[Math.min(Math.max(b,f+i),a),0,0,0]},l:function(b,a,c,d,g,e,f,h,i,j){b=Math.min(Math.max(b,f-j),a);return[b,0,0,e+f-b]}};for(d=0;d<h.length;d++)for(e=0;e<s.length;e++)(function(b,a){j[b+a]=j[a+b]=function(){var c=j[b].apply(this,arguments),e=j[a].apply(this,arguments),g=[];for(d=0;d<c.length;d++)g[d]=c[d]||e[d];return g}})(h[d],s[e]);n.extend(i,t,{destroy:function(){var b=this.dds,a;for(a in b)b[a].destroy(),b[a].get("node").remove(),delete b[a]}},
{ATTRS:{node:{setter:function(b){return p(b)}},prefixCls:{value:"ks-"},disabled:{},minWidth:{value:0},minHeight:{value:0},maxWidth:{value:Number.MAX_VALUE},maxHeight:{value:Number.MAX_VALUE},handlers:{value:[]}}});i.HANDLER={B:"b",T:"t",L:"l",R:"r",BL:"bl",TL:"tl",BR:"br",TR:"tr"};return i},{requires:["node","base","dd/base"]});
