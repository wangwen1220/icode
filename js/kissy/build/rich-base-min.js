/*
Copyright 2012, KISSY UI Library v1.40dev
MIT Licensed
build time: Nov 14 23:13
*/
KISSY.add("rich-base",function(a,k){function j(){var c,b;k.apply(this,arguments);b=this.get("listeners");for(c in b)this.on(c,b[c]);this.callMethodByHierarchy("initializer","constructor");this.constructPlugins();this.callPluginsMethod("initializer")}var l=a.noop;a.extend(j,k,{callMethodByHierarchy:function(c,b){for(var d=this.constructor,e=[],a,h,f,g,i;d;){i=[];if(g=d.__ks_exts)for(f=0;f<g.length;f++)if(a=g[f])"constructor"!=b&&(a=a.prototype.hasOwnProperty(b)?a.prototype[b]:null),a&&i.push(a);d.prototype.hasOwnProperty(c)&&
(h=d.prototype[c])&&i.push(h);i.length&&e.push.apply(e,i.reverse());d=d.superclass&&d.superclass.constructor}for(f=e.length-1;0<=f;f--)e[f]&&e[f].call(this)},callPluginsMethod:function(c){var b=this;a.each(b.get("plugins"),function(d){if(d[c])d[c](b)})},constructPlugins:function(){var c=this.get("plugins");a.each(c,function(b,d){a.isFunction(b)&&(c[d]=new b)})},initializer:l,destructor:l,destroy:function(){this.callPluginsMethod("destructor");for(var c=this.constructor,b,d,a;c;){c.prototype.hasOwnProperty("destructor")&&
c.prototype.destructor.apply(this);if(b=c.__ks_exts)for(a=b.length-1;0<=a;a--)(d=b[a]&&b[a].prototype.__destructor)&&d.apply(this);c=c.superclass&&c.superclass.constructor}this.fire("destroy");this.detach();this.fire("destroy");return this},plug:function(c){a.isFunction(c)&&(c=new c);c.initializer&&c.initializer(this);this.get("plugins").push(c);return this},unplug:function(c){var b=[],d=this,e=a.isString(c);a.each(this.get("plugins"),function(a){var h=0;if(c)if(e){if(!a.get||a.get("pluginId")!=c)b.push(a),
h=1}else a==c&&(b.push(a),h=1);h||a.destructor(d)});this.setInternal("plugins",b);return this}},{ATTRS:{plugins:{value:[]},listeners:{value:[]}}});j.extend=function b(d,e,j){var h="RichBaseDerived",f,g;f=a.makeArray(arguments);a.isObject(d)&&(j=e,e=d,d=[]);if("string"==typeof(f=f[f.length-1]))h=f;e=e||{};e.hasOwnProperty("constructor")?g=e.constructor:(g=function(){g.superclass.constructor.apply(this,arguments)},a.Config.debug&&eval("C=function "+h.replace(/[-.]/g,"_")+"(){ C.superclass.constructor.apply(this, arguments);}"));
g.name=h;a.extend(g,this,e,j);if(d){g.__ks_exts=d;var i={},k={};a.each(d.concat(g),function(b){if(b){a.each(b.ATTRS,function(b,d){var e=i[d]=i[d]||{};a.mix(e,b)});var b=b.prototype,d;for(d in b)b.hasOwnProperty(d)&&(k[d]=b[d])}});g.ATTRS=i;a.augment(g,k)}g.extend=b;return g};return j},{requires:["base"]});
