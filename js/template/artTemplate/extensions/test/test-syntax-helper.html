<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>template test</title>
<script src="../../template.js"></script>
<script src="../template-syntax.js"></script>
</head>

<body>
<h1>自定义语法(使用辅助方法)</h1>
<script id="test" type="template">
{text}
<br />
{$ubb2html text}
</script>


<script>

template.helper('$ubb2html', function (content) {
    return content
    .replace(/\[b\]([^\[]*?)\[\/b\]/igm, '<b>$1</b>')
    .replace(/\[i\]([^\[]*?)\[\/i\]/igm, '<i>$1</i>')
    .replace(/\[u\]([^\[]*?)\[\/u\]/igm, '<u>$1</u>')
    .replace(/\[url=([^\]]*)\]([^\[]*?)\[\/url\]/igm, '<a href="$1">$2</a>')
    .replace(/\[img\]([^\[]*?)\[\/img\]/igm, '<img src="$1" />');
});


var data = {
    text: '[url=http://www.planeart.cn][i]我的主页[/i][/url]'
};

var html = template('test', data);
document.write(html);
</script>
</body>
</html>



